{% extends 'base_mobile.html' %}
{% block title %}My Garage{% endblock %}
{% block content %}
{% if not request.args.get('app') %}
  {% include '_navbar.html' %}
{% endif %}
<div class="mobile-container" style="padding:8px;">
  <div class="garage-header" style="padding:1rem;flex-direction:column;align-items:flex-start;">
    <h1 class="garage-title" style="font-size:1.2em;">ğŸï¸ {{ user['username'] }}'s Garage</h1>
    <p style="color:var(--muted); margin-top:0.5rem; font-size:1em;">{{ bikes|length }} bike{{ 's' if bikes|length != 1 else '' }}</p>
  </div>
  {% if bikes %}
    <div class="bike-grid" style="display:flex;flex-direction:column;gap:1rem;">
      {% for bike in bikes %}
        <div class="bike-card" style="border-radius:10px;overflow:hidden;box-shadow:var(--shadow-1);">
          <div style="background: var(--n-200); height: 140px; overflow: hidden; cursor: pointer; border-radius: 10px 10px 0 0;" onclick="window.location.href='/bike/{{ bike['id'] }}'">
            {% if bike['image'] %}
              <img src="{{ bike['image'] }}" alt="{{ bike['name'] }}" style="width:100%;height:100px;object-fit:cover;">
            {% else %}
              <div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:var(--muted); font-size:2.2em;">ğŸï¸</div>
            {% endif %}
          </div>
          <div class="bike-info" style="padding:1rem;">
            <div class="bike-name" style="font-size:1.1em;">{{ bike['name'] }}</div>
            {% if bike['make_model'] %}
              <div class="bike-model" style="font-size:0.95em;color:var(--muted);">{{ bike['make_model'] }}</div>
            {% endif %}
            <div class="bike-stats" style="gap:0.5rem;margin:0.5rem 0;">
              {% if bike['year'] %}
                <div class="bike-stat">ğŸ“… <strong>{{ bike['year'] }}</strong></div>
              {% endif %}
              <div class="bike-stat">ğŸ›£ï¸ <strong>{{ bike['odo'] or 0 }} km</strong></div>
            </div>
            {% if bike['notes'] %}
              <div class="bike-notes" style="font-size:0.9em;color:var(--muted);margin-top:0.5rem;">{{ bike['notes'] }}</div>
            {% endif %}
            {% if session.get('user_id') and session.get('user_id') == user.id %}
            <div style="margin-top: 1rem; display: flex; gap: 8px;">
              <button onclick="window.location.href='/edit-bike/{{ bike['id'] }}'" class="btn" style="flex: 1; padding: 8px 12px; font-size: 0.9em; background: var(--primary-500); color: white; border: none; border-radius: 8px; cursor: pointer;">Edit</button>
            </div>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-garage" style="text-align:center;padding:2rem 1rem;color:var(--muted);">
      <div class="empty-garage-icon" style="font-size:2.5em;margin-bottom:1rem;">ğŸï¸</div>
      <h3 style="font-size:1.1em;">No Public Bikes</h3>
      <p style="font-size:1em;">This user hasn't shared any bikes yet.</p>
    </div>
  {% endif %}
</div>
{% endblock %}
